<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Beach Pull Tabs</title>
<link rel="stylesheet" href="/static/style.css"></head><body>
<div class="container">
  <header><h1>ğŸï¸ Beach Pull Tabs</h1>
    <nav>
      {% if logged %}<span>{{user}}</span><a href="/logout">Logout</a>{% else %}
      <a href="#register">Register</a><a href="#login">Login</a>{% endif %}
      {% if logged %}<a href="/history">My Wins</a>{% endif %}
      <a href="/admin">Admin</a>
    </nav>
  </header>
  <main>{% if not logged %}
    <form id="register" action="/register" method="POST"><input name="username" placeholder="User"><input name="password" type="password" placeholder="Pass"><button>Sign Up</button></form>
    <form id="login" action="/login" method="POST"><input name="username" placeholder="User"><input name="password" type="password" placeholder="Pass"><button>Login</button></form>
  {% else %}
    <div class="game">
      <p>Balance: ğŸ’° $<span id="bal">0</span></p>
      <div class="spinner"><div id="s1">â“</div><div id="s2">â“</div><div id="s3">â“</div></div>
      <button id="playBtn" onclick="play()">PLAY $1</button>
      <p id="msg"></p>
    </div>
  {% endif %}</main>
  <footer><p>&copy;2025 Beach Pull Tabs</p></footer>
</div>
<script>
async function update(){let r=await fetch("/balance");r=await r.json();document.getElementById("bal").innerText=r.balance;}
async function play(){
document.getElementById("msg").innerText="Spinning...";document.querySelector(".spinner").classList.add("spin");let r=await fetch("/play",{method:"POST"});let d=await r.json();document.querySelector(".spinner").classList.remove("spin");
if(d.error)return alert(d.error);
["s1","s2","s3"].forEach((id,i)=>document.getElementById(id).innerText=d.symbols[i]);
document.getElementById("msg").innerText = d.payout ? `ğŸ‰ You won $${d.payout}!` : "Try again!";
update();document.getElementById("playBtn").disabled=false;
}
{% if logged %}update();{% endif %}</script></body></html>
